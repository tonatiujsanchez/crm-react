import{j as v,u as F,N as E,O as $,a as j,r as d,c as T,b as y,d as L,F as O,e as A,f as u,E as g,g as k,B as R,R as z,h as x,i as P,k as I}from"./vendor.5fbffaa9.js";const M=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}};M();const e=v.exports.jsx,t=v.exports.jsxs,f=v.exports.Fragment,V=()=>{const{pathname:a}=F();return t("div",{className:"md:flex md:min-h-screen",children:[t("div",{className:"md:w-[300px] bg-gradient-to-r from-indigo-600 to-indigo-700 relative",children:[e("div",{className:"bg-indigo-800 px-5 py-5 md:sticky top-0",children:e("h2",{className:"font-black text-center text-white text-2xl",children:"CRM CLIENTES"})}),t("nav",{className:"px-10 py-10 md:sticky top-20",children:[e(E,{to:"/",className:`${a=="/"?"text-white":"text-indigo-300"} block text-2xl my-4 hover:text-white font-bold`,children:"Clientes"}),e(E,{to:"/clientes/nuevo",className:` ${a=="/clientes/nuevo"?"text-white":"text-indigo-300"} block text-2xl my-4 hover:text-white font-bold`,children:"Nuevo Cliente"})]})]}),e("div",{className:"md:w-4/5 px-3 sm:px-10 py-5",children:e($,{})})]})},q=({cliente:a,handleEliminar:n})=>{const i=j(),{nombre:o,empresa:s,email:l,telefono:r,notas:m,id:c}=a;return t("tr",{className:"border-b hover:bg-gray-100",children:[e("td",{className:"p-3 pl-10",children:o}),e("td",{className:"p-3 hidden md:table-cell",children:t("div",{className:"grid place-content-center",children:[t("p",{children:[e("span",{className:"text-gray-800 uppercase font-bold text-sm",children:"Email:"})," ",l]}),t("p",{children:[e("span",{className:"text-gray-800 uppercase font-bold text-sm",children:"Telefon:"})," ",r]})]})}),e("td",{className:"p-3 text-center",children:e("p",{className:"",children:s})}),t("td",{className:"p-3",children:[e("button",{onClick:()=>i(`/clientes/${c}`),type:"button",className:" bg-green-600 hover:bg-green-700 text-white block w-full p-2 mb-2 uppercase font-bold text-xs rounded-sm",children:"Ver"}),e("button",{onClick:()=>i(`/clientes/editar/${c}`),type:"button",className:" bg-blue-600 hover:bg-blue-700 text-white block w-full p-2 mb-2 uppercase font-bold text-xs rounded-sm",children:"Editar"}),e("button",{onClick:()=>n(c,o),type:"button",className:"bg-red-600 hover:bg-red-700 text-white block w-full p-2 uppercase font-bold text-xs rounded-sm",children:"Emilinar"})]})]})};const S=()=>t("div",{className:"lds-ripple",children:[e("div",{}),e("div",{})]}),B=()=>{const[a,n]=d.exports.useState([]),[i,o]=d.exports.useState(!1),s=async(l,r)=>{if(confirm(`\xBFDeseas eliminar el cliente ${r}?`))try{const c=`https://my-json-server.typicode.com/tonatiujsanchez/crm-react/clientes/${l}`;await(await fetch(c,{method:"DELETE"})).json();const p=a.filter(h=>h.id!==l);n(p)}catch{}};return d.exports.useEffect(async()=>{o(!0),(async()=>{try{const c=await(await fetch("https://my-json-server.typicode.com/tonatiujsanchez/crm-react/clientes")).json();n(c)}catch(r){console.log("Hubo un error al intentar obtener los clientes",r)}o(!1)})()},[]),t("div",{children:[e("h1",{className:"font-black text-3xl text-indigo-600",children:"Clientes"}),e("p",{className:" mt-1 text-md font-semibold",children:"Administra tus clientes"}),i?t("div",{className:"grid place-items-center mt-52",children:[" ",e(S,{})," "]}):a.length>0?t("table",{className:"max-w-full mt-5 table-auto shadow bg-white m-auto lg:w-10/12",children:[e("thead",{className:"bg-indigo-700 text-white",children:t("tr",{children:[e("th",{className:"p-2",children:"Nombre"}),e("th",{className:"p-2 hidden md:table-cell",children:"Contacto"}),e("th",{className:"p-2",children:"Empresa"}),e("th",{className:"p-2",children:"Acciones"})]})}),e("tbody",{children:a.map(l=>e(q,{cliente:l,handleEliminar:s},l.id))})]}):e("div",{className:"grid place-items-center mt-52",children:e("h2",{className:"text-2xl uppercase font-bold text-slate-700 text-center max-w-[300px] mx-auto",children:"No hay clientes registrados"})})]})},w=({cliente:a,cargando:n})=>{var l,r,m,c,N;const i=j(),o=T().shape({nombre:y().min(3,"El nombre es muy corto").max(40,"El nombre es muy largo").required("El nombre del cliente es obligatorio"),empresa:y().required("El nombre de la empresa es obligatorio"),email:y().email("Email no es v\xE1lido").required("El email es obligatorio"),telefono:L().integer("El n\xFAmero no es v\xE1lido").positive("El n\xFAmero no es v\xE1lido").typeError("El n\xFAmero no es v\xE1lido"),notas:""}),s=async(p,h)=>{try{let b;if(a.id){const C=`https://my-json-server.typicode.com/tonatiujsanchez/crm-react/clientes/${a.id}`;b=await fetch(C,{method:"PUT",body:JSON.stringify(p),headers:{"Content-Type":"application/json"}})}else b=await fetch("https://my-json-server.typicode.com/tonatiujsanchez/crm-react/clientes",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json"}});await b.json(),h(),i("/")}catch{console.log("Hubo un error al intentar agregar un nuevo cliente.")}};return t("div",{className:"mt-6 bg-white px-5 py-8 rounded-md shadow-md w-4/4 md:w-3/4 lg:w-[600px] mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-center uppercase text-lg",children:a!=null&&a.nombre?" Editar Cliente ":"Agregar Nuevo Cliente"}),e(O,{initialValues:{nombre:(l=a.nombre)!=null?l:"",empresa:(r=a.empresa)!=null?r:"",email:(m=a.email)!=null?m:"",telefono:(c=a.telefono)!=null?c:"",notas:(N=a.notas)!=null?N:""},enableReinitialize:!0,onSubmit:(p,{resetForm:h})=>{s(p,h)},validationSchema:o,children:({errors:p,isValid:h})=>t(A,{className:"mt-3",children:[t("div",{className:"mb-5",children:[t("label",{htmlFor:"nombre",className:"text-gray-600 text-sm font-bold uppercase",children:["Nombre: ",e("span",{className:"text-red-700",children:"*"})]}),e(u,{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre del Cliente",className:" mt-2 block w-full p-2 bg-gray-50 rounded-md shadow-sm focus:outline-indigo-700 text-md"}),e(g,{component:"p",name:"nombre",className:"text-red-600 mt-1 px-2"})]}),t("div",{className:"mb-5",children:[t("label",{htmlFor:"empresa",className:"text-gray-600 text-sm font-bold uppercase",children:["Empresa: ",e("span",{className:"text-red-700",children:"*"})]}),e(u,{type:"text",id:"empresa",name:"empresa",placeholder:"Empresa del Cliente",className:" mt-2 block w-full p-2 bg-gray-50 rounded-md shadow-sm focus:outline-indigo-700 text-md"}),e(g,{component:"p",name:"empresa",className:"text-red-600 mt-1 px-2"})]}),t("div",{className:"mb-5",children:[t("label",{htmlFor:"email",className:"text-gray-600 text-sm font-bold uppercase",children:["Email: ",e("span",{className:"text-red-700",children:"*"})]}),e(u,{type:"email",id:"email",name:"email",placeholder:"Email del Cliente",className:" mt-2 block w-full p-2 bg-gray-50 rounded-md shadow-sm focus:outline-indigo-700 text-md"}),e(g,{component:"p",name:"email",className:"text-red-600 mt-1 px-2"})]}),t("div",{className:"mb-5",children:[e("label",{htmlFor:"telefono",className:"text-gray-600 text-sm font-bold uppercase",children:"Telefono:"}),e(u,{type:"tel",id:"telefono",name:"telefono",placeholder:"Telefono del Cliente",className:" mt-2 block w-full p-2 bg-gray-50 rounded-md shadow-sm focus:outline-indigo-700 text-md"}),e(g,{component:"p",name:"telefono",className:"text-red-600 mt-1 px-2"})]}),t("div",{className:"mb-5",children:[e("label",{htmlFor:"notas",className:"text-gray-600 text-sm font-bold uppercase",children:"Notas"}),e(u,{as:"textarea",type:"text",id:"notas",name:"notas",placeholder:"Notas del Cliente",className:" mt-2 block w-full p-2 bg-gray-50 rounded-md shadow-sm h-40 max-h-20 focus:outline-indigo-700"})]}),e("input",{type:"submit",value:a!=null&&a.nombre?" Editar Cliente ":"Agregar Cliente",className:"mt-5 w-full bg-indigo-600 p-3 text-white font-bold uppercase rounded-md cursor-pointer hover:bg-indigo-700"})]})})]})};w.defaultProps={cliente:{},cargando:!1};const H=()=>t(f,{children:[e("h1",{className:"font-black text-3xl text-indigo-600",children:"Nuevo Cliente"}),e("p",{className:" mt-1 text-md font-semibold",children:"Llena los campos para registrar un nuevo cliente"}),e(w,{})]}),D=()=>{const{id:a}=k(),[n,i]=d.exports.useState({}),[o,s]=d.exports.useState(!1);return d.exports.useEffect(()=>{s(!0),(async()=>{try{const r=`https://my-json-server.typicode.com/tonatiujsanchez/crm-react/clientes/${a}`,c=await(await fetch(r)).json();i(c)}catch(r){console.log("Hubo un error al tratar de leer el cliente.",r)}setTimeout(()=>{s(!1)},500)})()},[]),t(f,{children:[e("h1",{className:"font-black text-3xl text-indigo-600",children:"Editar Cliente"}),e("p",{className:" mt-1 text-md font-semibold",children:"Utiliza este formulario para editar un cliente"}),o?t("div",{className:"grid place-items-center mt-52",children:[" ",e(S,{})," "]}):n!=null&&n.nombre?e(w,{cliente:n,cargando:o}):e("div",{className:"grid place-items-center mt-52",children:e("h2",{className:"text-2xl uppercase font-bold text-slate-700 text-center max-w-[300px] mx-auto",children:"No se encontraron resultados"})})]})},J=()=>e("div",{className:"rounded-md max-w-sm mt-10",children:t("div",{className:"animate-pulse flex flex-col",children:[t("div",{className:"flex-1 space-y-4 py-1 mb-10",children:[e("div",{className:"h-2 bg-slate-300 rounded w-56"}),e("div",{className:"h-8 bg-slate-300 rounded w-96"})]}),e("div",{className:"flex-1 space-y-4 py-1 mb-5",children:t("div",{className:"grid grid-cols-3 gap-4",children:[e("div",{className:"h-3 bg-slate-300 rounded col-span-1"}),e("div",{className:"h-2 bg-slate-300 rounded col-span-1"})]})}),e("div",{className:"mb-4 h-3 bg-slate-300 rounded w-28"}),e("div",{className:"mb-4 h-2 bg-slate-300 rounded w-52 sm:ml-7"}),e("div",{className:"mb-4 h-2 bg-slate-300 rounded w-36 sm:ml-7"}),e("div",{className:"mb-4 h-3 bg-slate-300 rounded w-28 mt-3"}),e("div",{className:"mb-4 h-52 bg-slate-300 rounded w-full md:w-96 mt-1 sm:ml-7"})]})}),U=()=>{const{id:a}=k(),[n,i]=d.exports.useState({}),[o,s]=d.exports.useState(!1);return d.exports.useEffect(()=>{s(!0),(async()=>{try{const r=`https://my-json-server.typicode.com/tonatiujsanchez/crm-react/clientes/${a}`,c=await(await fetch(r)).json();i(c)}catch(r){console.log("Hubo un error al tratar de leer el cliente.",r)}setTimeout(()=>{s(!1)},800)})()},[]),e("div",{children:o?e(J,{}):Object.keys(n).length>0?t(f,{children:[e("p",{className:" mt-10 text-md font-semibold",children:"Informaci\xF3n detallada del cliente"}),e("h1",{className:"font-black text-3xl text-indigo-600",children:n.nombre}),t("div",{className:"mt-8",children:[t("p",{className:"uppercase font-extrabold text-indigo-900 mb-4",children:["Empresa: ",e("span",{className:"text-gray-700 font-semibold",children:n.empresa})]}),e("p",{className:"uppercase font-extrabold text-indigo-900 mb-1",children:"Contacto:"}),t("div",{className:"sm:ml-7 mb-4",children:[t("p",{className:"font-semibold",children:["Email: ",e("span",{className:"text-gray-700",children:n.email})]}),n.telefono&&t("p",{className:"font-semibold",children:["Telefono: ",e("span",{className:"text-gray-700",children:n.telefono})]})]}),n.notas&&t(f,{children:[e("p",{className:"uppercase font-extrabold text-indigo-900 mb-1",children:"Notas:"}),e("textarea",{className:"sm:ml-7 w-full md:w-96 min-h-[200px] bg-white p-5 rounded-lg",disabled:!0,value:n.notas})]})]})]}):e("h2",{className:" mt-32 text-2xl uppercase font-bold text-slate-700 text-center max-w-[300px] mx-auto md:ml-10",children:"No se encontraron resultados"})})};function K(){return e(R,{children:e(z,{children:t(x,{path:"/",element:e(V,{}),children:[e(x,{index:!0,element:e(B,{})}),e(x,{path:"clientes/nuevo",element:e(H,{})}),e(x,{path:"clientes/editar/:id",element:e(D,{})}),e(x,{path:"clientes/:id",element:e(U,{})})]})})})}P.render(e(I.StrictMode,{children:e(K,{})}),document.getElementById("root"));
